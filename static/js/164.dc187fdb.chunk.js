"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[164],{2868:function(e,n,t){var r=t(184);n.Z=function(e){var n=e.onClick;return(0,r.jsx)("button",{type:"button",onClick:n,children:"Load more"})}},6528:function(e,n,t){t.d(n,{NV:function(){return s},TP:function(){return f},fw:function(){return i},gL:function(){return l},zv:function(){return p}});var r=t(5861),a=t(4687),c=t.n(a),u=t(2388),o="3fcb05b829685e6a45bc9aa7307d9bc9";u.Z.defaults.baseURL="https://api.themoviedb.org/3";var i=function(){var e=(0,r.Z)(c().mark((function e(n,t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("/trending/movie/day?api_key=".concat(o,"&page=").concat(n),{signal:t});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)(c().mark((function e(n,t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("search/movie?api_key=".concat(o,"&query=").concat(t,"&page=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("movie/".concat(n,"?api_key=").concat(o,"&language=en-US"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("/movie/".concat(n,"/credits?api_key=").concat(o,"&language=en-US"));case 2:return t=e.sent,e.abrupt("return",t.data.cast);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("movie/".concat(n,"/reviews?api_key=").concat(o,"&language=en-US&page=1"));case 2:return t=e.sent,e.abrupt("return",t.data.results);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},6164:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var r=t(3433),a=t(9439),c=t(5705),u=t(2797),o=t(2007),i=t.n(o),s=t(184),f=u.Ry().shape({movieSearch:u.Z_().min(3,"Too short name!").max(20,"Too long name!").required()}),p=function(e){var n=e.onSubmit;return(0,s.jsx)(c.J9,{initialValues:{movieSearch:""},onSubmit:n,validatorSchema:f,children:function(e){var n=e.errors,t=e.touched;return(0,s.jsxs)(c.l0,{children:[(0,s.jsx)(c.gN,{name:"movieSearch",children:n.movieSearch&&t.movieSearch?(0,s.jsx)("div",{children:n.movieSearch}):null}),(0,s.jsx)("button",{type:"submit",children:" Search "})]})}})},l=p;p.propType={onSubmit:i().func.isRequired};var v=t(1087),h=function(e){var n=e.movies,t=e.state;return(0,s.jsx)("ul",{children:n.map((function(e){var n=e.title,r=e.id;return(0,s.jsx)("li",{children:(0,s.jsxs)(v.rU,{to:"".concat(r),state:t,children:[" ",n]})},r)}))})},d=h;h.propType={state:i().string.isRequired,id:i().string.isRequired,title:i().string.isRequired};var m=t(2868),g=t(2791),x=t(6528),b=t(7689),Z=function(){var e=(0,g.useState)(1),n=(0,a.Z)(e,2),t=n[0],c=n[1],u=(0,v.lr)(),o=(0,a.Z)(u,2),i=o[0],f=o[1],p=(0,g.useState)([]),h=(0,a.Z)(p,2),Z=h[0],S=h[1],k=(0,g.useState)(0),y=(0,a.Z)(k,2),w=y[0],j=y[1],_=(0,g.useState)(""),q=(0,a.Z)(_,2),C=q[0],R=q[1],T=i.get("query"),U=(0,b.TH)();(0,g.useEffect)((function(){var e=new AbortController,n=e.signal;return T?(C!==T&&S([]),(0,x.NV)(t,T,n).then((function(e){S((function(n){return[].concat((0,r.Z)(n),(0,r.Z)(e.results))})),j(e.total_pages),R(T)})).catch((function(e){console.log("Error:",e)})),function(){e.abort()}):function(){e.abort()}}),[T,t,C]);return console.log("KWAK"),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{onSubmit:function(e){c(1),j(0),f({query:e.movieSearch})}}),Z.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d,{movies:Z,state:{from:U}}),w!==t&&(0,s.jsx)(m.Z,{onClick:function(){c((function(e){return e+1}))}})]})]})}}}]);
//# sourceMappingURL=164.dc187fdb.chunk.js.map