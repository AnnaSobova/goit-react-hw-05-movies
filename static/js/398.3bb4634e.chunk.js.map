{"version":3,"file":"static/js/398.3bb4634e.chunk.js","mappings":"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","sources":["components/LoadMoreButton/LoadMoreButton.jsx","components/services/getApi.jsx","components/SearchForm/SearchForm.jsx","components/GalleryList/MovieGallery.jsx","pages/Movies1.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\n\nconst LoadMoreButton=({onClick})=>{\n    return (\n        <button type=\"button\" onClick={onClick}>\n         Load more\n        </button>\n    );\n};\n\nexport default LoadMoreButton;\n\nLoadMoreButton.propTypes = {\n    onClick:PropTypes.func.isRequired,\n};\n","import axios from \"axios\";\n\nconst KEY = '3fcb05b829685e6a45bc9aa7307d9bc9';\n\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\n\nexport const getTrendsOfMovies = async (page, signal)=>{\n    const responce = await axios.get(\n        `/trending/movie/day?api_key=${KEY}&page=${page}`,\n       { signal }\n    );\n    return responce.data \n};\n\nexport const getMoviesSearch = async (page, query) => {\n    const response = await axios.get(\n      `search/movie?api_key=${KEY}&query=${query}&page=${page}`\n    );\n    return response.data;\n  };\n\nexport const getMovieDetails = async id=>{\n    const responce = await axios.get(\n        `movie/${id}?api_key=${KEY}&language=en-US`\n    );\n   return responce;\n}\n\nexport const  getMovieCredits = async id=>{\n    const responce = await axios.get(\n        `/movie/${id}/credits?api_key=${KEY}&language=en-US`\n    );\n    return responce.data.cast;\n};\n\nexport const getMovieRewiews = async id => {\n    const response = await axios.get(\n      `movie/${id}/reviews?api_key=${KEY}&language=en-US&page=1`\n    );\n    return response.data.results;\n  };\n","import{ Formik, Form, Field } from 'formik';\nimport * as Yup from 'yup';\nimport PropTypes from 'prop-types';\n\nconst schema = Yup.object().shape({\n    movieSearch: Yup.string()\n        .min(3, 'Too short name!')\n        .max(20, 'Too long name!')\n        .required(),\n    \n});\nconst SearchForm =({onSubmit})=>{\n    return(\n        <Formik\n        initialValues={{movieSearch:''}}\n        onSubmit={onSubmit}\n        validatorSchema={schema}\n       >\n        {({errors,touched})=>(\n            <Form>\n                <Field name=\"movieSearch\">\n                  {errors.movieSearch&& touched.movieSearch?(\n                    <div>{errors.movieSearch}</div>\n                  ):null}\n                </Field>\n                <button type=\"submit\"> Search </button>\n            </Form>\n        )}\n       </Formik>\n    );\n};\n\nSearchForm.propType ={\n    onSubmit:PropTypes.func.isRequired,\n};\n\nexport default SearchForm;","import {Link} from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nconst MovieGallery =({movies,state})=>{\n    return(\n        <ul>\n            {movies.map(movie=>{\n                const{title,id}=movie;\n                return(\n                    <li key={id}>\n                        <Link to={`${id}`}state={state}> {title}\n                        </Link>\n                    </li>\n                );\n            })}\n        </ul>\n    );\n};\nexport default MovieGallery;\n\nMovieGallery.propType={\n    state: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n    title:PropTypes.string.isRequired,\n};","import SearchForm  from 'components/SearchForm/SearchForm';\nimport MovieGallery from 'components/GalleryList/MovieGallery';\nimport LoadMoreButton from 'components/LoadMoreButton/LoadMoreButton';\nimport { useState, useEffect } from 'react';\nimport { getMoviesSearch } from '../components/services/getApi';\nimport { useSearchParams, useLocation } from 'react-router-dom';\n\nconst Movies = () => {\n  const [trigger, setTrigger] = useState({});\n  const [page, setPage] = useState(1);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [movies, setMovies] = useState([]);\n  const [total, settotal] = useState(0);\n\n  const query = searchParams.get('query');\n  const [searchQuery, setSearchQuery] = useState(query || undefined);\n\n  const location = useLocation();\n\n  useEffect(() => {\n    const controller = new AbortController();\n    const signal = controller.signal;\n\n    if (!query || !searchQuery) {\n      setMovies([]);\n      return () => {\n        controller.abort();\n      };\n    }\n\n    setSearchQuery(query);\n    if (searchQuery !== query) {\n      setMovies([]);\n    }\n\n    if (searchQuery && query) {\n      getMoviesSearch(page, query, signal)\n        .then(data => {\n          setMovies(prevState => [...prevState, ...data.results]);\n          settotal(data.total_pages);\n        })\n        .catch(error => {\n          console.log('Error:', error);\n        });\n    }\n\n    return () => {\n      controller.abort();\n    };\n  }, [query, page, searchQuery, trigger]);\n\n  const handleSubmitForm = query => {\n    setMovies([]);\n    setPage(1);\n    settotal(0);\n    setTrigger({});\n    setSearchParams({ query: query.movieSearch });\n  };\n\n  const handleLoadMoreButton = () => {\n    setPage(prevState => prevState + 1);\n  };\n\n  return (\n    <>\n      <SearchForm search={searchQuery} onSubmit={handleSubmitForm} />\n      {movies.length > 0 && (\n        <>\n          <MovieGallery movies={movies} state={{ from: location }} />\n          {total !== page && <LoadMoreButton onClick={handleLoadMoreButton} />}\n        </>\n      )}\n    </>\n  );\n};\n\nexport default Movies;\n"],"names":["onClick","type","KEY","axios","getTrendsOfMovies","page","signal","responce","data","getMoviesSearch","query","response","getMovieDetails","id","getMovieCredits","cast","getMovieRewiews","results","schema","Yup","shape","movieSearch","min","max","required","SearchForm","onSubmit","initialValues","validatorSchema","errors","touched","name","propType","PropTypes","MovieGallery","movies","state","map","movie","title","to","useState","trigger","setTrigger","setPage","useSearchParams","searchParams","setSearchParams","setMovies","total","settotal","get","undefined","searchQuery","setSearchQuery","location","useLocation","useEffect","controller","AbortController","then","prevState","total_pages","catch","error","console","log","abort","search","length","from","LoadMoreButton"],"sourceRoot":""}